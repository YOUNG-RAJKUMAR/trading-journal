<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Ledger Pro // V6.0 Multi-Style</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Orbitron:wght@700&family=JetBrains+Mono&family=Playfair+Display:ital,wght@1,700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style id="theme-style">
        :root {
            --bg: #05070a; --glass: rgba(15, 20, 30, 0.95); --border: rgba(255, 255, 255, 0.1);
            --primary: #00fff0; --negative: #ff3366; --positive: #00ff88; --text: #e0e6ed; --font: 'Inter', sans-serif; --heading-font: 'Orbitron';
        }
        
        body { background: var(--bg); color: var(--text); font-family: var(--font); margin: 0; transition: all 0.4s ease; }
        .app-container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        /* HEADER & THEME SWITCHER */
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
        .theme-select { background: var(--glass); border: 1px solid var(--primary); color: var(--primary); padding: 8px; border-radius: 6px; font-family: var(--heading-font); font-size: 0.7rem; cursor: pointer; }
        
        .util-bar { display: flex; gap: 10px; align-items: center; }
        .btn-report { background: var(--positive); color: #000; border: none; padding: 8px 15px; border-radius: 6px; font-family: var(--heading-font); font-size: 0.65rem; cursor: pointer; font-weight: bold; }

        /* TABS */
        .tab-nav { display: flex; gap: 5px; margin-bottom: 20px; border-bottom: 1px solid var(--border); }
        .tab-btn { background: transparent; border: none; color: var(--text); padding: 12px 25px; cursor: pointer; font-family: var(--heading-font); font-size: 0.75rem; opacity: 0.5; transition: 0.3s; }
        .tab-btn.active { opacity: 1; border-bottom: 2px solid var(--primary); color: var(--primary); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }

        /* ANALYTICS */
        .analytics-dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .stat-card { background: var(--glass); border: 1px solid var(--border); border-top: 3px solid var(--primary); padding: 15px; border-radius: 8px; text-align: center; }
        .stat-label { font-size: 0.6rem; color: var(--primary); text-transform: uppercase; font-weight: bold; }
        .stat-val { display: block; font-family: var(--heading-font); font-size: 1.1rem; margin-top: 5px; }

        /* CALENDAR */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
        .cal-day { background: var(--glass); border: 1px solid var(--border); min-height: 90px; padding: 8px; border-radius: 8px; transition: 0.3s; }
        .cal-day.profit { border-color: var(--positive); background: rgba(0, 255, 136, 0.05); }
        .cal-day.loss { border-color: var(--negative); background: rgba(255, 51, 102, 0.05); }

        /* FORMS & TABLES */
        .card { background: var(--glass); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 12px; }
        .section-label { font-size: 0.65rem; color: var(--primary); text-transform: uppercase; margin: 15px 0 8px; display: block; font-family: var(--heading-font); }
        input, select, button { background: rgba(0,0,0,0.5); border: 1px solid var(--border); color: #fff; padding: 10px; border-radius: 6px; font-size: 0.8rem; }
        .date-link { color: var(--primary); text-decoration: underline; cursor: pointer; }
        
        table { width: 100%; border-collapse: collapse; }
        th { font-family: var(--heading-font); color: var(--primary); padding: 12px; border-bottom: 2px solid var(--primary); font-size: 0.65rem; }
        td { padding: 10px; border-bottom: 1px solid var(--border); font-size: 0.8rem; text-align: center; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="app-container" id="printable-area">
    <header class="header-top">
        <h1 id="brand-logo" style="font-family:'Orbitron'; font-size: 1.2rem; color: var(--primary); margin:0;">NEON_LEDGER // V6.0</h1>
        
        <div class="util-bar">
            <select class="theme-select" onchange="ui.setTheme(this.value)">
                <option value="neon">NEON DEFAULT</option>
                <option value="cyber">CYBERPUNK 2077</option>
                <option value="glass">GLASSMORPHISM</option>
                <option value="minimal">DARK MINIMALIST</option>
                <option value="holo">HOLOGRAPHIC</option>
                <option value="brutal">WEB BRUTALISM</option>
                <option value="retro">80S SYNTHWAVE</option>
                <option value="luxury">BLACK & GOLD</option>
            </select>
            <button class="btn-report" onclick="ui.downloadPDF()">REPORT PDF</button>
        </div>
    </header>

    <nav class="tab-nav">
        <button class="tab-btn active" id="btn-journal" onclick="ui.switchTab('journal')">JOURNAL</button>
        <button class="tab-btn" id="btn-calendar" onclick="ui.switchTab('calendar')">CALENDAR</button>
        <button class="tab-btn" id="btn-analytics" onclick="ui.switchTab('analytics')">ADVANCED ANALYTICS</button>
    </nav>

    <div id="tab-journal" class="tab-content active">
        <div class="card">
            <span class="section-label">Execution Entry</span>
            <div class="form-grid">
                <select id="t-asset"><option value="100000">Forex</option><option value="1000">Gold</option><option value="10">Indices</option></select>
                <input type="text" id="t-symbol" placeholder="SYMBOL">
                <input type="number" id="t-lots" placeholder="LOTS" step="0.01">
                <select id="t-session"><option value="ASIAN">Asian</option><option value="LONDON">London</option><option value="NY">New York</option></select>
                <input type="number" id="t-entry" placeholder="ENTRY">
                <input type="number" id="t-exit" placeholder="EXIT">
                <input type="datetime-local" id="t-start">
                <button onclick="ui.handleNewTrade()" style="background:var(--primary); color:#000; font-weight:bold; cursor:pointer;">SAVE EXECUTION</button>
            </div>
        </div>
        <div class="card">
            <table id="tradeTable">
                <thead><tr><th>DATE</th><th>SYMBOL</th><th>SESSION</th><th>P/L ($)</th><th>ACTION</th></tr></thead>
                <tbody id="tradeBody"></tbody>
            </table>
        </div>
    </div>

    <div id="tab-calendar" class="tab-content">
        <div class="card">
            <div class="calendar-controls" style="display:flex; justify-content:space-between; margin-bottom:15px;">
                <select id="cal-month" onchange="ui.renderCalendar()"></select>
                <select id="cal-year" onchange="ui.renderCalendar()"></select>
            </div>
            <div class="calendar-grid" id="calendarGrid"></div>
        </div>
    </div>

    <div id="tab-analytics" class="tab-content">
        <div class="analytics-dashboard">
            <div class="stat-card"><span class="stat-label">Profit Factor</span><span id="s-pf" class="stat-val">0.00</span></div>
            <div class="stat-card"><span class="stat-label">Gross Profit</span><span id="s-gp" class="stat-val" style="color:var(--positive)">$0</span></div>
            <div class="stat-card"><span class="stat-label">Avg R:R</span><span id="s-arr" class="stat-val">1:0.0</span></div>
        </div>
        <div style="display:grid; grid-template-columns: 2fr 1fr; gap:20px;">
            <div class="card"><h3>Equity Curve</h3><canvas id="equityChart"></canvas></div>
            <div class="card"><h3>Profit/Loss Ratio</h3><canvas id="pieChart"></canvas></div>
        </div>
    </div>
</div>

<script>
const themes = {
    neon: { bg: '#05070a', primary: '#00fff0', glass: 'rgba(15, 20, 30, 0.95)', border: 'rgba(255,255,255,0.1)', pos: '#00ff88', neg: '#ff3366', font: 'Inter', heading: 'Orbitron' },
    cyber: { bg: '#000000', primary: '#fcee0a', glass: 'rgba(20,20,20,0.9)', border: '#fcee0a', pos: '#00ff00', neg: '#ff003c', font: 'JetBrains Mono', heading: 'JetBrains Mono' },
    glass: { bg: 'linear-gradient(135deg, #1e1e2f, #2d2d44)', primary: '#ffffff', glass: 'rgba(255,255,255,0.1)', border: 'rgba(255,255,255,0.2)', pos: '#4ade80', neg: '#f87171', font: 'Inter', heading: 'Inter' },
    minimal: { bg: '#000', primary: '#eee', glass: '#111', border: '#333', pos: '#fff', neg: '#555', font: 'Inter', heading: 'Inter' },
    holo: { bg: '#0a0a1a', primary: '#b0e0ff', glass: 'rgba(100,200,255,0.1)', border: 'rgba(176,224,255,0.5)', pos: '#00ffcc', neg: '#ff00ff', font: 'Inter', heading: 'Orbitron' },
    brutal: { bg: '#ffffff', primary: '#000000', glass: '#ffffff', border: '#000000', pos: '#00ff00', neg: '#ff0000', font: 'Courier New', heading: 'Courier New' },
    retro: { bg: '#2b0f54', primary: '#ff00de', glass: 'rgba(43,15,84,0.8)', border: '#00d8ff', pos: '#00ff88', neg: '#ff3366', font: 'Orbitron', heading: 'Orbitron' },
    luxury: { bg: '#0c0c0c', primary: '#d4af37', glass: 'rgba(20,20,20,0.95)', border: '#d4af37', pos: '#d4af37', neg: '#444', font: 'Playfair Display', heading: 'Playfair Display' }
};

const JournalStore = {
    key: 'neon_v6_data',
    fetch: () => JSON.parse(localStorage.getItem(JournalStore.key)) || [],
    save: (d) => localStorage.setItem(JournalStore.key, JSON.stringify(d))
};

const ui = {
    charts: {},
    init() {
        const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
        months.forEach((m, i) => document.getElementById('cal-month').innerHTML += `<option value="${i}">${m}</option>`);
        for(let y=2024; y<=2026; y++) document.getElementById('cal-year').innerHTML += `<option value="${y}">${y}</option>`;
        document.getElementById('cal-month').value = new Date().getMonth();
        document.getElementById('cal-year').value = new Date().getFullYear();
        this.renderAll();
    },

    setTheme(tKey) {
        const t = themes[tKey];
        const root = document.documentElement.style;
        root.setProperty('--bg', t.bg);
        root.setProperty('--primary', t.primary);
        root.setProperty('--glass', t.glass);
        root.setProperty('--border', t.border);
        root.setProperty('--positive', t.pos);
        root.setProperty('--negative', t.neg);
        root.setProperty('--font', t.font);
        root.setProperty('--heading-font', t.heading);
        if(tKey === 'brutal') {
            root.setProperty('--text', '#000');
        } else {
            root.setProperty('--text', t.primary === '#ffffff' ? '#eee' : t.primary);
        }
    },

    switchTab(id) {
        document.querySelectorAll('.tab-content, .tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(`tab-${id}`).classList.add('active');
        document.getElementById(`btn-${id}`).classList.add('active');
        this.renderAll();
    },

    openDateInCalendar(dateStr) {
        const d = new Date(dateStr);
        document.getElementById('cal-month').value = d.getMonth();
        document.getElementById('cal-year').value = d.getFullYear();
        this.switchTab('calendar');
    },

    downloadPDF() { window.print(); },

    handleNewTrade() {
        const entry = parseFloat(document.getElementById('t-entry').value);
        const exit = parseFloat(document.getElementById('t-exit').value);
        const lots = parseFloat(document.getElementById('t-lots').value);
        const mult = parseFloat(document.getElementById('t-asset').value);
        if(!entry || !exit) return;
        const trade = {
            id: Date.now(), symbol: document.getElementById('t-symbol').value.toUpperCase(),
            session: document.getElementById('t-session').value,
            profit: (exit - entry) * lots * mult,
            date: new Date(document.getElementById('t-start').value || Date.now()).toISOString().split('T')[0]
        };
        const data = JournalStore.fetch(); data.push(trade); JournalStore.save(data); this.renderAll();
    },

    renderAll() {
        const trades = JournalStore.fetch();
        const body = document.getElementById('tradeBody'); body.innerHTML = '';
        let gProf = 0, gLoss = 0, cumulative = [], eq = 0, winCount = 0, lossCount = 0;

        trades.forEach(t => {
            eq += t.profit; cumulative.push(eq);
            if(t.profit > 0) { gProf += t.profit; winCount++; } else { gLoss += Math.abs(t.profit); lossCount++; }
            body.innerHTML += `<tr>
                <td><span class="date-link" onclick="ui.openDateInCalendar('${t.date}')">${t.date}</span></td>
                <td>${t.symbol}</td><td>${t.session}</td>
                <td style="color:${t.profit>=0?'var(--positive)':'var(--negative)'}">$${t.profit.toFixed(2)}</td>
                <td><button onclick="ui.deleteTrade(${t.id})">X</button></td>
            </tr>`;
        });

        document.getElementById('s-pf').innerText = gLoss > 0 ? (gProf / gLoss).toFixed(2) : gProf.toFixed(2);
        document.getElementById('s-gp').innerText = `$${gProf.toFixed(0)}`;
        this.updateCharts(cumulative, trades.map(t=>t.date), winCount, lossCount);
        this.renderCalendar();
    },

    renderCalendar() {
        const grid = document.getElementById('calendarGrid'); grid.innerHTML = '';
        const m = parseInt(document.getElementById('cal-month').value);
        const y = parseInt(document.getElementById('cal-year').value);
        const days = new Date(y, m + 1, 0).getDate();
        const trades = JournalStore.fetch();
        for (let i = 1; i <= days; i++) {
            const dStr = `${y}-${String(m+1).padStart(2,'0')}-${String(i).padStart(2,'0')}`;
            const dayPL = trades.filter(t => t.date === dStr).reduce((s, t) => s + t.profit, 0);
            const status = dayPL !== 0 ? (dayPL >= 0 ? 'profit' : 'loss') : '';
            grid.innerHTML += `<div class="cal-day ${status}"><b>${i}</b>${dayPL !== 0 ? `<div>$${dayPL.toFixed(0)}</div>` : ''}</div>`;
        }
    },

    updateCharts(eq, labels, wins, losses) {
        if(this.charts.equity) this.charts.equity.destroy();
        this.charts.equity = new Chart(document.getElementById('equityChart'), {
            type: 'line', data: { labels, datasets: [{ label: 'Equity', data: eq, borderColor: getComputedStyle(document.documentElement).getPropertyValue('--primary'), fill: true, tension: 0.3 }] }
        });
        if(this.charts.pie) this.charts.pie.destroy();
        this.charts.pie = new Chart(document.getElementById('pieChart'), {
            type: 'doughnut', data: { labels: ['Wins', 'Losses'], datasets: [{ data: [wins, losses], backgroundColor: [getComputedStyle(document.documentElement).getPropertyValue('--positive'), getComputedStyle(document.documentElement).getPropertyValue('--negative')], borderWidth: 0 }] }
        });
    },

    deleteTrade(id) { JournalStore.save(JournalStore.fetch().filter(t => t.id !== id)); this.renderAll(); }
};

window.onload = () => ui.init();
</script>
</body>
</html>