<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate Pro Neon Trading Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial/dist/chartjs-chart-financial.min.js"></script>
<style>
body{font-family:'Orbitron',sans-serif;margin:0;background:#0a0f1a;color:#00fff0;overflow-x:hidden;}
h1,h2,h3{text-align:center;margin:10px 0;}
#login-container{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;}
#login-container input,#login-container button{padding:12px;margin:8px 0;width:300px;border:none;border-radius:5px;background:#001f33;color:#00fff0;box-shadow:0 0 10px #00fff0;transition:0.3s;}
#login-container input:focus,#login-container button:hover{box-shadow:0 0 20px #00fff0;outline:none;}
#dashboard{display:none;padding:20px;}
#form-container,#filters,#stats,#symbol-summary,#widgets{margin-bottom:25px;}
input,select,button,textarea{padding:10px;margin:5px;border-radius:5px;border:none;background:#001f33;color:#00fff0;box-shadow:0 0 10px #00fff0;transition:0.3s;}
input:focus,select:focus,button:hover,textarea:focus{box-shadow:0 0 20px #00fff0;outline:none;}
table{border-collapse:collapse;width:100%;background:#0a0f1a;color:#00fff0;box-shadow:0 0 10px #00fff0;}
th,td{border:1px solid #00fff0;padding:8px;text-align:center;}
th{background:linear-gradient(90deg,#00fff0,#00b3ff);cursor:pointer;}
tr:hover{background:rgba(0,255,240,0.1);}
canvas{background:#0a0f1a;border:1px solid #00fff0;border-radius:8px;margin-top:20px;}
textarea{width:100%;padding:8px;border-radius:5px;border:none;box-shadow:0 0 10px #00fff0;background:#001f33;color:#00fff0;resize:none;}
.widget{display:inline-block;margin:5px;padding:10px;width:150px;text-align:center;background:#001f33;box-shadow:0 0 10px #00fff0;border-radius:8px;}
@media(max-width:768px){input,select,button,textarea,.widget{width:100%;margin:5px 0;}}
</style>
</head>
<body>
<h1>üöÄ Ultimate Pro Neon Trading Platform</h1>

<!-- LOGIN -->
<div id="login-container">
<h2>Login</h2>
<input type="password" id="login-password" placeholder="Enter Password">
<button onclick="checkLogin()">Login</button>
<p id="login-error" style="color:#ff4d4d;"></p>
</div>

<!-- DASHBOARD -->
<div id="dashboard">

  <!-- Add Trade Form -->
  <div id="form-container">
    <h3>Add New Trade</h3>
    <input type="date" id="trade-date">
    <input type="text" id="trade-symbol" placeholder="Symbol (e.g., BTC/USD)">
    <input type="number" id="trade-entry" placeholder="Entry Price">
    <input type="number" id="trade-exit" placeholder="Exit Price">
    <input type="number" id="trade-lotsize" placeholder="Lot Size" step="0.01">
    <textarea id="trade-note" placeholder="Trade Notes / Strategy"></textarea>
    <button onclick="addTrade()">Add Trade</button>
    <button onclick="exportCSV()">Export CSV</button>
    <input type="file" id="importCSV" accept=".csv" onchange="importCSV(event)">
  </div>

  <!-- Filters -->
  <div id="filters">
    <h3>üîç Filters & Chart Symbol</h3>
    <select id="filter-symbol" onchange="renderTrades()"><option value="">All Symbols</option></select>
    <input type="month" id="filter-month" onchange="renderTrades()">
    <button onclick="clearFilters()">Clear Filters</button>
    <select id="chart-symbol" onchange="updateChartSymbol()"><option value="">Select Symbol for Chart</option></select>
  </div>

  <!-- Mini Widgets -->
  <div id="widgets">
    <div class="widget">üìÖ Today P/L: <span id="today-pl">0</span></div>
    <div class="widget">üìä Month P/L: <span id="month-pl">0</span></div>
    <div class="widget">üèÜ Win Rate: <span id="win-rate-widget">0%</span></div>
  </div>

  <!-- Stats -->
  <div id="stats">
    <h3>üìä Overall Stats</h3>
    <p>Total Trades: <span id="total-trades">0</span></p>
    <p>Total Profit/Loss: <span id="total-profit">0</span></p>
    <p>Win Rate: <span id="win-rate">0%</span></p>
    <p>Longest Win Streak: <span id="win-streak">0</span></p>
    <p>Longest Loss Streak: <span id="loss-streak">0</span></p>
  </div>

  <!-- Portfolio Summary -->
  <div id="symbol-summary">
    <h3>üìà Portfolio Summary</h3>
    <table id="summary-table">
      <tr><th>Symbol</th><th>Total Trades</th><th>Profit/Loss</th><th>Lot Size</th></tr>
    </table>
  </div>

  <!-- Trades Table -->
  <table id="trades-table">
    <tr><th>Date</th><th>Symbol</th><th>Entry</th><th>Exit</th><th>Lot Size</th><th>Profit/Loss</th><th>Notes</th><th>Action</th></tr>
  </table>

  <!-- Charts -->
  <canvas id="profitChart" width="400" height="200"></canvas>
  <canvas id="cumulativeChart" width="400" height="200"></canvas>
  <canvas id="candlestickChart" width="400" height="200"></canvas>

</div>

<script>
// LOGIN
const password="MySecret123";
function checkLogin(){ const input=document.getElementById('login-password').value;
if(input===password){document.getElementById('login-container').style.display='none';document.getElementById('dashboard').style.display='block';initDashboard();}
else{document.getElementById('login-error').innerText='Incorrect password!';}}

// DASHBOARD DATA
let trades=JSON.parse(localStorage.getItem('trades'))||[];
let currentChartSymbol='';

function initDashboard(){ updateFilters(); renderTrades(); }

// ADD TRADE
function addTrade(){
  const date=document.getElementById('trade-date').value;
  const symbol=document.getElementById('trade-symbol').value.toUpperCase();
  const entry=parseFloat(document.getElementById('trade-entry').value);
  const exit=parseFloat(document.getElementById('trade-exit').value);
  const lotsize=parseFloat(document.getElementById('trade-lotsize').value);
  const note=document.getElementById('trade-note').value;
  if(!date||!symbol||isNaN(entry)||isNaN(exit)||isNaN(lotsize)){ alert('Fill all fields!'); return; }
  trades.push({date,symbol,entry,exit,lotsize,note});
  localStorage.setItem('trades',JSON.stringify(trades));
  updateFilters(); renderTrades();
  document.getElementById('trade-date').value=''; document.getElementById('trade-symbol').value='';
  document.getElementById('trade-entry').value=''; document.getElementById('trade-exit').value='';
  document.getElementById('trade-lotsize').value=''; document.getElementById('trade-note').value='';
}

// EXPORT / IMPORT CSV
function exportCSV(){ let csv='Date,Symbol,Entry,Exit,Lot Size,Notes\n'; trades.forEach(t=>{csv+=`${t.date},${t.symbol},${t.entry},${t.exit},${t.lotsize},${t.note}\n`;});
const blob=new Blob([csv],{type:'text/csv'}); const link=document.createElement('a'); link.href=URL.createObjectURL(blob); link.download='trades.csv'; link.click();}
function importCSV(event){const file=event.target.files[0]; const reader=new FileReader();
reader.onload=function(e){const text=e.target.result.split('\n'); text.slice(1).forEach(line=>{if(!line)return; const [date,symbol,entry,exit,lotsize,note]=line.split(','); trades.push({date,symbol,entry:parseFloat(entry),exit:parseFloat(exit),lotsize:parseFloat(lotsize),note});});
localStorage.setItem('trades',JSON.stringify(trades)); updateFilters(); renderTrades();}
reader.readAsText(file);}

// FILTERS
function updateFilters(){
  const filterSelect=document.getElementById('filter-symbol');
  const chartSelect=document.getElementById('chart-symbol');
  const symbols=[...new Set(trades.map(t=>t.symbol))];
  filterSelect.innerHTML='<option value="">All Symbols</option>';
  chartSelect.innerHTML='<option value="">Select Symbol for Chart</option>';
  symbols.forEach(s=>{ filterSelect.innerHTML+=`<option value="${s}">${s}</option>`; chartSelect.innerHTML+=`<option value="${s}">${s}</option>`; });
}
function clearFilters(){document.getElementById('filter-symbol').value=''; document.getElementById('filter-month').value=''; renderTrades();}
function updateChartSymbol(){ currentChartSymbol=document.getElementById('chart-symbol').value; renderCharts(); }

// RENDER TRADES & STATS
function renderTrades(){
  const table=document.getElementById('trades-table'); table.innerHTML=`<tr><th>Date</th><th>Symbol</th><th>Entry</th><th>Exit</th><th>Lot Size</th><th>Profit/Loss</th><th>Notes</th><th>Action</th></tr>`;
  const symbolFilter=document.getElementById('filter-symbol').value;
  const monthFilter=document.getElementById('filter-month').value;
  const filtered=trades.filter(t=> (symbolFilter?t.symbol===symbolFilter:true) && (monthFilter?t.date.startsWith(monthFilter):true));

  let winStreak=0, lossStreak=0, maxWin=0, maxLoss=0, currentWin=0, currentLoss=0;

  filtered.forEach(t=>{ const profit=(t.exit-t.entry)*t.lotsize; if(profit>0){currentWin++;currentLoss=0;}else if(profit<0){currentLoss++;currentWin=0;} if(currentWin>maxWin) maxWin=currentWin; if(currentLoss>maxLoss) maxLoss=currentLoss; });

  filtered.forEach(trade=>{ const profit=(trade.exit-trade.entry)*trade.lotsize; const row=table.insertRow();
    row.innerHTML=`<td>${trade.date}</td><td>${trade.symbol}</td><td>${trade.entry}</td><td>${trade.exit}</td><td>${trade.lotsize}</td><td style="color:${profit>=0?'#00ff00':'#ff4d4d'}">${profit.toFixed(2)}</td><td>${trade.note}</td><td><button onclick="deleteTrade(${trades.indexOf(trade)})">Delete</button></td>`;});

  updateStats(filtered,maxWin,maxLoss); renderPortfolio(filtered); renderCharts(); renderWidgets(filtered); triggerAlerts(filtered);
}

function updateStats(filteredTrades,maxWin,maxLoss){
  const totalTrades=filteredTrades.length;
  const totalProfit=filteredTrades.reduce((sum,t)=>sum+((t.exit-t.entry)*t.lotsize),0);
  const wins=filteredTrades.filter(t=>((t.exit-t.entry)*t.lotsize)>0).length;
  const winRate=totalTrades?((wins/totalTrades)*100).toFixed(2):0;
  document.getElementById('total-trades').innerText=totalTrades;
  document.getElementById('total-profit').innerText=totalProfit.toFixed(2);
  document.getElementById('win-rate').innerText=winRate+'%';
  document.getElementById('win-streak').innerText=maxWin;
  document.getElementById('loss-streak').innerText=maxLoss;
}

// PORTFOLIO
function renderPortfolio(filteredTrades){
  const summaryTable=document.getElementById('summary-table'); summaryTable.innerHTML=`<tr><th>Symbol</th><th>Total Trades</th><th>Profit/Loss</th><th>Lot Size</th></tr>`;
  const symbols=[...new Set(filteredTrades.map(t=>t.symbol))];
  symbols.forEach(sym=>{ const sTrades=filteredTrades.filter(t=>t.symbol===sym); const total=sTrades.length; const profit=sTrades.reduce((sum,t)=>sum+((t.exit-t.entry)*t.lotsize),0); const lotSum=sTrades.reduce((sum,t)=>sum+t.lotsize,0); const row=summaryTable.insertRow(); row.innerHTML=`<td>${sym}</td><td>${total}</td><td>${profit.toFixed(2)}</td><td>${lotSum.toFixed(2)}</td>`; });
}

// MINI WIDGETS
function renderWidgets(filteredTrades){
  const today=new Date().toISOString().slice(0,10);
  const month=new Date().toISOString().slice(0,7);
  const todayPL=filteredTrades.filter(t=>t.date===today).reduce((sum,t)=>sum+((t.exit-t.entry)*t.lotsize),0);
  const monthPL=filteredTrades.filter(t=>t.date.startsWith(month)).reduce((sum,t)=>sum+((t.exit-t.entry)*t.lotsize),0);
  const wins=filteredTrades.filter(t=>((t.exit-t.entry)*t.lotsize)>0).length;
  const winRate=filteredTrades.length?((wins/filteredTrades.length)*100).toFixed(2):0;
  document.getElementById('today-pl').innerText=todayPL.toFixed(2);
  document.getElementById('month-pl').innerText=monthPL.toFixed(2);
  document.getElementById('win-rate-widget').innerText=winRate+'%';
}

// ALERTS
function triggerAlerts(filteredTrades){
  const totalProfit=filteredTrades.reduce((sum,t)=>sum+((t.exit-t.entry)*t.lotsize),0);
  if(totalProfit<-500) alert('‚ö†Ô∏è Daily loss exceeds $500!');
}

// DELETE
function deleteTrade(index){ trades.splice(index,1); localStorage.setItem('trades',JSON.stringify(trades)); updateFilters(); renderTrades(); }

// CHARTS
let profitChart, cumulativeChart, candlestickChart;
function renderCharts(){
  const ctx1=document.getElementById('profitChart').getContext('2d');
  const ctx2=document.getElementById('cumulativeChart').getContext('2d');
  const ctx3=document.getElementById('candlestickChart').getContext('2d');

  let filteredTrades=currentChartSymbol?trades.filter(t=>t.symbol===currentChartSymbol):trades;

  const labels=filteredTrades.map(t=>t.date);
  const dailyPL=filteredTrades.map(t=>(t.exit-t.entry)*t.lotsize);
  const cumulativePL=[]; dailyPL.reduce((acc,val)=>{acc+=val;cumulativePL.push(acc);return acc;},0);

  if(profitChart) profitChart.destroy();
  if(cumulativeChart) cumulativeChart.destroy();
  if(candlestickChart) candlestickChart.destroy();

  profitChart=new Chart(ctx1,{type:'line',data:{labels,datasets:[{label:'Daily P/L',data:dailyPL,borderColor:'#00ffea',backgroundColor:'rgba(0,255,234,0.1)',fill:true,tension:0.4}]},options:{responsive:true,animation:{duration:1000}}});
  cumulativeChart=new Chart(ctx2,{type:'line',data:{labels,datasets:[{label:'Cumulative P/L',data:cumulativePL,borderColor:'#ff00ff',backgroundColor:'rgba(255,0,255,0.1)',fill:true,tension:0.4}]},options:{responsive:true,animation:{duration:1200}}});

  const candleData=filteredTrades.map(t=>({x:t.date,o:t.entry,h:Math.max(t.entry,t.exit),l:Math.min(t.entry,t.exit),c:t.exit}));
  candlestickChart=new Chart(ctx3,{type:'candlestick',data:{datasets:[{label:'Candlestick',data:candleData}]},options:{responsive:true}});
}
</script>
</body>
</html>