<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Ledger Pro // V3.5 Elite</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg: #05070a; --glass: rgba(15, 20, 30, 0.95); --border: rgba(255, 255, 255, 0.1);
            --primary: #00fff0; --negative: #ff3366; --positive: #00ff88; 
            --active-text: #ffffff; /* Dynamic Text Color Variable */
        }
        /* Quick Switch Color Classes */
        .txt-red { --active-text: #ff4d4d; } .txt-orange { --active-text: #ff9f43; }
        .txt-blue { --active-text: #00d2ff; } .txt-white { --active-text: #ffffff; }

        body { background: var(--bg); color: var(--active-text); font-family: 'Inter', sans-serif; margin: 0; transition: color 0.2s ease; }
        .app-container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .card { background: var(--glass); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 20px; backdrop-filter: blur(10px); }
        h1, h3 { font-family: 'Orbitron'; color: var(--primary); text-transform: uppercase; margin: 0; }

        /* Color Switcher Buttons */
        .color-bar { display: flex; gap: 8px; align-items: center; }
        .dot { width: 22px; height: 22px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; transition: transform 0.2s; }
        .dot:hover { transform: scale(1.2); }

        /* Form Layout: Split into Entry/Close */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .input-group { display: flex; flex-direction: column; gap: 8px; }
        input, select { background: #000; border: 1px solid var(--border); color: #fff; padding: 10px; border-radius: 6px; font-size: 0.85rem; }
        
        /* Hit Buttons */
        .btn-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 15px; grid-column: 1 / -1; }
        .btn-hit { padding: 15px; font-family: 'Orbitron'; border: none; cursor: pointer; border-radius: 6px; font-weight: bold; }
        .btn-tp { background: var(--positive); color: #000; }
        .btn-sl { background: var(--negative); color: #fff; }
        .btn-manual { background: #444; color: #fff; }

        /* History Table */
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { font-family: 'Orbitron'; color: var(--primary); padding: 12px; border-bottom: 2px solid var(--primary); font-size: 0.65rem; }
        td { padding: 10px; border-bottom: 1px solid var(--border); font-size: 0.8rem; text-align: center; color: var(--active-text); }
    </style>
</head>
<body class="txt-white">

<div class="app-container">
    <header style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h1>NEON_LEDGER // V3.5_ELITE</h1>
        <div class="color-bar">
            <span style="font-size: 0.7rem; font-family: 'Orbitron';">TEXT COLOR:</span>
            <div class="dot" style="background:red" onclick="ui.setTextColor('red')"></div>
            <div class="dot" style="background:orange" onclick="ui.setTextColor('orange')"></div>
            <div class="dot" style="background:blue" onclick="ui.setTextColor('blue')"></div>
            <div class="dot" style="background:white" onclick="ui.setTextColor('white')"></div>
        </div>
    </header>

    <div class="card">
        <div class="form-grid">
            <div class="input-group">
                <h3 style="font-size: 0.7rem; opacity: 0.7;">1. ENTRY SPECIFICATIONS</h3>
                <select id="t-asset"><option value="100000">Forex (Standard)</option><option value="1000">Gold/Commodities</option><option value="10">Indices/Crypto</option></select>
                <input type="text" id="t-symbol" placeholder="SYMBOL (e.g. NAS100)">
                <input type="number" id="t-lots" placeholder="LOT SIZE (e.g. 0.50)" step="0.01">
                <input type="number" id="t-entry" placeholder="ENTRY PRICE">
                <input type="datetime-local" id="t-start" title="Entry Time Taken">
            </div>
            <div class="input-group">
                <h3 style="font-size: 0.7rem; opacity: 0.7;">2. EXIT TARGETS</h3>
                <input type="number" id="t-sl" placeholder="STOP LOSS PRICE">
                <input type="number" id="t-tp" placeholder="TAKE PROFIT PRICE">
                <input type="datetime-local" id="t-end" title="Close Time Taken">
                <input type="number" id="t-manual-exit" placeholder="MANUAL EXIT PRICE (Optional)">
            </div>
            <div class="btn-row">
                <button class="btn-hit btn-tp" onclick="ui.handleLog('TP')">TAKEPROFIT HIT</button>
                <button class="btn-hit btn-sl" onclick="ui.handleLog('SL')">STOPLOSS HIT</button>
                <button class="btn-hit btn-manual" onclick="ui.handleLog('MANUAL')">MANUAL CLOSE</button>
            </div>
        </div>
    </div>

    <div class="card" style="overflow-x:auto;">
        <table>
            <thead>
                <tr>
                    <th>DATE</th>
                    <th>SYMBOL</th>
                    <th>LOTS</th>
                    <th>SIDE</th>
                    <th>RESULT</th>
                    <th>DURATION</th>
                    <th>P/L ($)</th>
                    <th>DEL</th>
                </tr>
            </thead>
            <tbody id="tradeBody"></tbody>
        </table>
    </div>
</div>

<script>
const JournalStore = {
    key: 'neon_v35_storage',
    fetch: () => JSON.parse(localStorage.getItem(JournalStore.key)) || [],
    save: (d) => localStorage.setItem(JournalStore.key, JSON.stringify(d))
};

const ui = {
    init() { this.renderAll(); },
    
    setTextColor(color) {
        document.body.className = `txt-${color}`;
    },

    handleLog(outcome) {
        const entry = parseFloat(document.getElementById('t-entry').value);
        const sl = parseFloat(document.getElementById('t-sl').value);
        const tp = parseFloat(document.getElementById('t-tp').value);
        const manualExit = parseFloat(document.getElementById('t-manual-exit').value);
        const lots = parseFloat(document.getElementById('t-lots').value);
        const mult = parseFloat(document.getElementById('t-asset').value);
        
        let exitPrice = manualExit;
        if(outcome === 'TP') exitPrice = tp;
        if(outcome === 'SL') exitPrice = sl;

        if(!entry || !exitPrice || !lots) return alert("Missing entry, target, or lot size!");

        const startTime = new Date(document.getElementById('t-start').value);
        const endTime = new Date(document.getElementById('t-end').value);
        const durMin = Math.round((endTime - startTime) / 60000);

        const side = (tp > entry) ? 'BUY' : 'SELL';
        const direction = (side === 'BUY') ? 1 : -1;
        const profit = (exitPrice - entry) * lots * mult * direction;

        const trade = {
            id: Date.now(),
            date: new Date().toLocaleDateString(),
            symbol: document.getElementById('t-symbol').value.toUpperCase(),
            lots, side, outcome, profit,
            duration: durMin > 0 ? `${durMin}m` : '---'
        };

        const data = JournalStore.fetch();
        data.push(trade);
        JournalStore.save(data);
        this.renderAll();
    },

    renderAll() {
        const trades = JournalStore.fetch();
        const body = document.getElementById('tradeBody');
        body.innerHTML = '';
        trades.reverse().forEach(t => {
            body.innerHTML += `
                <tr>
                    <td>${t.date}</td>
                    <td><b>${t.symbol}</b></td>
                    <td>${t.lots}</td>
                    <td style="color:${t.side === 'BUY' ? 'var(--positive)' : 'var(--negative)'}">${t.side}</td>
                    <td><span style="padding:2px 5px; border:1px solid; border-radius:4px; font-size:0.6rem;">${t.outcome}</span></td>
                    <td>${t.duration}</td>
                    <td style="color:${t.profit >= 0 ? 'var(--positive)' : 'var(--negative)'}">$${t.profit.toFixed(2)}</td>
                    <td><button onclick="ui.deleteTrade(${t.id})">âœ–</button></td>
                </tr>
            `;
        });
    },

    deleteTrade(id) {
        JournalStore.save(JournalStore.fetch().filter(t => t.id !== id));
        this.renderAll();
    }
};

window.onload = () => ui.init();
</script>
</body>
</html>